# -*- mode: ruby -*-
# vi: set ft=ruby :

#require 'vagrant-vbguest' #Comment since yet incopatible with vagrant 1.1
#require 'vagrant-hostmaster'

Vagrant::Config.run do |config|
  config.vm.box = "sandbox-condor"

  # The url from where the 'config.vm.box' box will be fetched if it
  # doesn't already exist on the user's system.
  config.vm.box_url = "https://copy.com/qMjCclCFEGPw/sandbox-condor.box?download=1"

  # Boot with a GUI so you can see the screen. (Default is headless)
  config.vm.boot_mode = :gui

  # config.vm.network :hostonly, "192.168.56.101"
  config.vm.host_name = "sandbox"
  config.vm.customize ["modifyvm", :id, "--memory", 3048] #For dev purpose

  config.vm.provision :puppet, :options => "--verbose --debug" do |puppet|
    puppet.manifests_path = "manifests"
    puppet.manifest_file  = "sandbox.pp"
  end

  config.vm.customize ["modifyvm", :id, "--rtcuseutc", "on"]
  config.vm.customize ["modifyvm", :id, "--name", "HDP Sandbox 1.3", "--groups", "/HortonWorks"]

  config.vm.customize ["modifyvm", :id, "--nictype1", "Am79C973"]
  config.vm.customize ["modifyvm", :id, "--nic2", "none"]
  config.vm.customize ["modifyvm", :id, "--mouse", "usbtablet"]
  
  config.vm.forward_port 22, 42022
  config.vm.forward_port 25, 42025
  config.vm.forward_port 68, 42068
  config.vm.forward_port 80, 42080
  config.vm.forward_port 111, 42111
  config.vm.forward_port 161, 42161
  config.vm.forward_port 199, 42199
  config.vm.forward_port 465, 42465
  config.vm.forward_port 587, 42587
  config.vm.forward_port 631, 42631
  config.vm.forward_port 878, 42878
  config.vm.forward_port 897, 42897
  config.vm.forward_port 2181, 2181
  config.vm.forward_port 3306, 3306
  config.vm.forward_port 5432, 5432
  config.vm.forward_port 8000, 8000
  config.vm.forward_port 8002, 8002
  config.vm.forward_port 8010, 8010
  config.vm.forward_port 8020, 8020
  config.vm.forward_port 8080, 8080
  config.vm.forward_port 8649, 8649
  config.vm.forward_port 8651, 8651
  config.vm.forward_port 8652, 8652
  config.vm.forward_port 8888, 8888
  config.vm.forward_port 9083, 9083
  config.vm.forward_port 9290, 9290
  config.vm.forward_port 9090, 9090
  config.vm.forward_port 10000, 10000
  config.vm.forward_port 11000, 11000
  config.vm.forward_port 11001, 11001
  config.vm.forward_port 34450, 34450
  config.vm.forward_port 38481, 38481
  config.vm.forward_port 39278, 39278
  config.vm.forward_port 41021, 41021
  config.vm.forward_port 43253, 43253
  config.vm.forward_port 43342, 43342
  config.vm.forward_port 43535, 43535
  config.vm.forward_port 43706, 43706
  config.vm.forward_port 46665, 46665
  config.vm.forward_port 50010, 50010
  config.vm.forward_port 50030, 50030
  config.vm.forward_port 50060, 50060
  config.vm.forward_port 50070, 50070
  config.vm.forward_port 50075, 50075
  config.vm.forward_port 50090, 50090
  config.vm.forward_port 50111, 50111
  config.vm.forward_port 50300, 50300
  config.vm.forward_port 51076, 51076
  config.vm.forward_port 51111, 51111
  config.vm.forward_port 51809, 51809
  config.vm.forward_port 53190, 53190
  config.vm.forward_port 53302, 53302
  config.vm.forward_port 54201, 54201
  config.vm.forward_port 59620, 59620
  config.vm.forward_port 60000, 60000
  config.vm.forward_port 60010, 60010
  config.vm.forward_port 60020, 60020
  config.vm.forward_port 60030, 60030
  config.vm.forward_port 60572, 60572

end
