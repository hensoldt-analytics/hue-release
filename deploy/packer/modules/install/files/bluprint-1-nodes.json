{
    "configurations" : [
        {
            "capacity-scheduler" : {
                "yarn.scheduler.capacity.root.default.maximum-am-resource-percent" :  "0.5",
                "yarn.scheduler.capacity.maximum-am-resource-percent" : "0.5"
            }
        },
        {
            "cluster-env": {
                "cluster_name": "sandbox",
                "smokeuser": "ambari-qa",
                "user_group": "hadoop",
                "security_enabled": "false"
            }
        },
        {
            "core-site" : {
                "hadoop.proxyuser.hue.hosts" : "*",
                "hadoop.proxyuser.hue.groups" : "*",
                "hadoop.proxyuser.root.hosts" : "*",
                "hadoop.proxyuser.root.groups" : "*",
                "hadoop.proxyuser.oozie.hosts" : "*",
                "hadoop.proxyuser.oozie.groups" : "*"
            }
        },
        {
            "hadoop-env": {
                "dtnode_heapsize" : "250",
                "hadoop_heapsize" : "250",
                "namenode_heapsize" : "250",
                "namenode_opt_newsize": "50",
                "namenode_opt_maxnewsize": "100"
            }
        },
        {
            "hive-env": {
                "content" : "\n if [ \"$SERVICE\" = \"cli\" ]; then\n   if [ -z \"$DEBUG\" ]; then\n     export HADOOP_OPTS=\"$HADOOP_OPTS -XX:NewRatio=12 -Xms10m -XX:MaxHeapFreeRatio=40 -XX:MinHeapFreeRatio=15 -XX:+UseParNewGC -XX:-UseGCOverheadLimit\"\n   else\n     export HADOOP_OPTS=\"$HADOOP_OPTS -XX:NewRatio=12 -Xms10m -XX:MaxHeapFreeRatio=40 -XX:MinHeapFreeRatio=15 -XX:-UseGCOverheadLimit\"\n   fi\n fi\n\n# The heap size of the jvm stared by hive shell script can be controlled via:\n\nexport HADOOP_HEAPSIZE=\"{{hive_heapsize}}\"\nexport HADOOP_CLIENT_OPTS=\"-Xmx${HADOOP_HEAPSIZE}m $HADOOP_CLIENT_OPTS\"\n\n# Larger heap size may be required when running queries over large number of files or partitions.\n# By default hive shell scripts use a heap size of 256 (MB).  Larger heap size would also be\n# appropriate for hive server (hwi etc).\n\n\n# Set HADOOP_HOME to point to a specific hadoop install directory\nHADOOP_HOME=${HADOOP_HOME:-{{hadoop_home}}}\n\n# Hive Configuration Directory can be controlled by:\nexport HIVE_CONF_DIR={{hive_config_dir}}\n\n# Folder containing extra ibraries required for hive compilation/execution can be controlled by:\nif [ \"${HIVE_AUX_JARS_PATH}\" != \"\" ]; then\n  export HIVE_AUX_JARS_PATH=${HIVE_AUX_JARS_PATH}\nelif [ -d \"/usr/lib/hive-hcatalog/\" ]; then\n  export HIVE_AUX_JARS_PATH=/usr/lib/hive-hcatalog/share/hcatalog/hive-hcatalog-core-*.jar\nelse\n  export HIVE_AUX_JARS_PATH=/usr/hdp/current/hive-hcatalog/share/hcatalog/hive-hcatalog-core.jar\nfi\nexport METASTORE_PORT={{hive_metastore_port}}\n    "
            }
        },
        {
            "hbase-site" : {
                "hbase.security.authorization": "true",
                "hbase.rpc.engine": "org.apache.hadoop.hbase.ipc.SecureRpcEngine",
                "hbase_master_heapsize": "250",
                "hbase_regionserver_heapsize": "250",
                "hbase.rpc.protection": "PRIVACY"
            }
        },
        {
            "hdfs-site" : {
                "dfs.block.size" : "34217472",
                "dfs.replication" : "1",
                "dfs.namenode.accesstime.precision" : "3600000",
                "dfs.nfs3.dump.dir" : "/tmp/.hdfs-nfs",
                "dfs.nfs.exports.allowed.hosts" : "* rw",
                "dfs.datanode.max.xcievers" : "1024",
                "dfs.block.access.token.enable" : "false"
            }
        },
        {
            "hive-site" : {
                "javax.jdo.option.ConnectionPassword" : "hive",
                "hive.tez.container.size" : "250",
                "hive.tez.java.opts" : "-server -Xmx200m -Djava.net.preferIPv4Stack=true",
                "hive.heapsize" : "250",
                "hive.users.in.admin.role" : "hue,hive",
                "hive_metastore_user_passwd" : "hive",
                "hive.server2.enable.impersonation": "true",
                "hive.server2.authentication": "NOSASL"
            }
        },
        {
            "mapred-env": {
                "jobhistory_heapsize" : "250"
            }
        },
        {
            "mapred-site" : {
                "mapreduce.map.memory.mb" : "250",
                "mapreduce.reduce.memory.mb" : "250",
                "mapreduce.task.io.sort.mb" : "64",
                "yarn.app.mapreduce.am.resource.mb" : "250",
                "yarn.app.mapreduce.am.command-opts" : "-Xmx200m",
                "mapred.job.reduce.memory.mb" : "250",
                "mapred.child.java.opts" : "-Xmx200m",
                "mapred.job.map.memory.mb" : "250",
                "io.sort.mb" : "64",
                "mapreduce.map.java.opts" : "-Xmx200m",
                "mapreduce.reduce.java.opts" : "-Xmx200m"
            }
        },
        {
            "nagios-env":{
                "nagios_contact" : "admin@localhost.localdomain",
                "nagios_web_login" : "nagiosadmin",
                "nagios_web_password" : "admin"
            }
        },
        {
            "oozie-site" : {
                "oozie.service.ProxyUserService.proxyuser.hue.hosts" : "*",
                "oozie.service.ProxyUserService.proxyuser.hue.groups" : "*",
 		"oozie.service.JPAService.jdbc.password" : "oozie"
            }
        },
        {
            "storm-site" : {
                "logviewer.port" : 8005,
                "nimbus.childopts" : "-Xmx220m -javaagent:/usr/hdp/current/storm/contrib/storm-jmxetric/lib/jmxetric-1.0.4.jar=host=sandbox.hortonworks.com,port=8649,wireformat31x=true,mode=multicast,config=/usr/hdp/current/storm/contrib/storm-jmxetric/conf/jmxetric-conf.xml,process=Nimbus_JVM",
                "ui.childopts" : "-Xmx220m",
                "drpc.childopts" : "-Xmx220m"
            }
        },
        {
            "tez-site" : {
                "tez.am.java.opts" : "-server -Xmx200m -Djava.net.preferIPv4Stack=true -XX:+UseNUMA -XX:+UseParallelGC",
                "tez.am.resource.memory.mb" : "250",
                "tez.dag.am.resource.memory.mb" : "250",
                "yarn.app.mapreduce.am.command-opts" : "-Xmx200m"
            }
        },
        {
            "webhcat-site" : {
                "webhcat.proxyuser.hue.hosts" : "*",
                "webhcat.proxyuser.hue.groups" : "*"
            }
        },
        {
            "yarn-env": {
                "apptimelineserver_heapsize" : "250",
                "resourcemanager_heapsize" : "250",
                "nodemanager_heapsize" : "250",
                "yarn_heapsize" : "250"
            }

        },
        {
            "yarn-site" : {
                "yarn.nodemanager.resource.memory-mb": "2250",
                "yarn.nodemanager.vmem-pmem-ratio" : "10",
                "yarn.scheduler.minimum-allocation-mb" : "250",
                "yarn.scheduler.maximum-allocation-mb" : "2250",
                "yarn.nodemanager.pmem-check-enabled" : "false",
                "yarn.acl.enable" : "false"
            }
        }
    ],
    "host_groups" : [
        {
            "name" : "host_group_1",
            "components" : [
                {"name": "APP_TIMELINE_SERVER"},
                {"name" : "DATANODE"},
                {"name" : "DRPC_SERVER"},
                {"name" : "FALCON_CLIENT"},
                {"name" : "FALCON_SERVER"},
                {"name" : "FLUME_HANDLER"},
                {"name" : "GANGLIA_SERVER"},
                {"name" : "HBASE_CLIENT"},
                {"name" : "HBASE_MASTER"},
                {"name" : "HBASE_REGIONSERVER"},
                {"name" : "HDFS_CLIENT"},
                {"name" : "HISTORYSERVER"},
                {"name" : "HIVE_CLIENT"},
                {"name" : "HIVE_METASTORE"},
                {"name" : "HIVE_SERVER"},
                {"name" : "MAPREDUCE2_CLIENT"},
                {"name" : "MYSQL_SERVER"},
                {"name" : "NAGIOS_SERVER"},
                {"name" : "NAMENODE"},
                {"name" : "NIMBUS"},
                {"name" : "NODEMANAGER"},
                {"name" : "OOZIE_SERVER"},
                {"name" : "OOZIE_CLIENT"},
                {"name" : "PIG"},
                {"name" : "RESOURCEMANAGER"},
                {"name" : "SECONDARY_NAMENODE"},
                {"name" : "SLIDER"},
                {"name" : "SQOOP"},
                {"name" : "STORM_REST_API"},
                {"name" : "STORM_UI_SERVER"},
                {"name" : "SUPERVISOR"},
                {"name" : "TEZ_CLIENT"},
                {"name" : "WEBHCAT_SERVER"},
                {"name" : "YARN_CLIENT"},
                {"name" : "ZOOKEEPER_CLIENT"},
                {"name" : "ZOOKEEPER_SERVER"}
            ],
            "cardinality" : "1"
        }
    ],
    "Blueprints" : {
        "blueprint_name" : "sandbox",
        "stack_name" : "HDP",
        "stack_version" : "2.2"
    }
}
